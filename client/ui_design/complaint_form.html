<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hostel Complaint Submission</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com?plugins=forms"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

</head>

<body class="bg-gradient-to-br from-blue-50 to-gray-100 min-h-screen flex items-center justify-center font-[Inter]">

<div class="bg-white w-full max-w-xl rounded-2xl shadow-lg p-8">

    <!-- Header -->
    <div class="text-center mb-6">
        <div class="mx-auto mb-3 w-14 h-14 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 text-2xl">
            üè¢
        </div>
        <h1 class="text-2xl font-bold text-gray-800">
            Hostel Complaint Management
        </h1>
        <p class="text-gray-500 text-sm mt-1">
            Submit a new maintenance request
        </p>
    </div>

    <!-- Form -->
    <form id="complaintForm" class="space-y-5">

        <!-- Room -->
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1">
                Room Number
            </label>
            <input
                id="room"
                type="text"
                placeholder="e.g., 202"
                class="w-full rounded-lg border border-gray-300 p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                required
            >
        </div>

        <!-- Category -->
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1">
                Complaint Category
            </label>
            <select
                id="category"
                class="w-full rounded-lg border border-gray-300 p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                required
            >
                <option value="">Select category</option>
                <option>Water</option>
                <option>Electricity</option>
                <option>Cleanliness</option>
                <option>Other</option>
            </select>
        </div>

        <!-- Description -->
        <div>
            <label class="block text-sm font-semibold text-gray-700 mb-1">
                Complaint Description
            </label>
            <textarea
                id="description"
                rows="4"
                placeholder="Describe the issue clearly"
                class="w-full rounded-lg border border-gray-300 p-3 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                required
            ></textarea>
        </div>

        <!-- Submit -->
        <button
            type="submit"
            class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition"
        >
            Submit Complaint
        </button>

    </form>
</div>

<script>
document.getElementById("complaintForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const room = document.getElementById("room").value;
    const category = document.getElementById("category").value;
    const description = document.getElementById("description").value;

    const response = await fetch("http://127.0.0.1:8000/submit-complaint", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ room, category, description })
    });

    const result = await response.json();

    if (result.status === "success") {
        window.location.href = "confirmation.html";
    } else {
        alert("Error submitting complaint");
    }
});
</script>

</body>
</html>
